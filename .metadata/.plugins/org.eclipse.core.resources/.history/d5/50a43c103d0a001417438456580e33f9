package com.controlador;

import java.io.IOException;

import javax.servlet.http.*;

import com.modelo.DataStoreConection;
import com.modelo.Diario;

/* Servlet que ejecutará las operaciones de administración de RSS
 * tales como agregar Diarios, categorias, url de nuevas rss, eliminar y definir 
 * los diario y categorias predefinidas
 * */
@SuppressWarnings("serial")
public class AdministraRSSServlet extends HttpServlet {
	
	/*Recibe las variables por GET (funciones de eliminar)*/
	public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
					
		String correo = req.getParameter("correo");
		String codigo_validacion = req.getParameter("cod");		
		//Se crea un objeto clase para conexion con el dtastore 
		DataStoreConection ds = new DataStoreConection();
		/* Se edita el datastore con su función validar_cuenta(correo, codigo_validacion),
		 *  cambiando el valor predefinido del atributo validado en la entidad 
		 *  usuario de 0 a 1 y retornando true si se hizo satisfactoriamente y false caso contrario 
		 * */
		if(ds.validar_cuenta(correo, codigo_validacion)){
			/*Se redirecciona a notificaciones indicando por GET: m=cuenta_validada
			 * para que se muestre el mensaje de validación correspondiente*/
			resp.sendRedirect("notificaciones.jsp?m=cuenta_validada ");
		}else{
			/*Se redirecciona a notificaciones indicando por GET: m=datos_erroneos
			 * para que se muestre el mensaje correspondiente de datos no procesados
			 * por haber sido alterados o inexistentes*/
			resp.sendRedirect("notificaciones.jsp?m=datos_erroneos;correo="+correo+";cod="+codigo_validacion);
		}	
	}
	
	/*Recibe las variables por POST (funciones de agregar)*/
	public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
		String url_diario = req.getParameter("url_diario");
		if(url_diario != null){
			String nombre_diario = req.getParameter("nombre_diario");
			Diario d = new Diario(nombre_diario, url_diario);
		}
	}
}
